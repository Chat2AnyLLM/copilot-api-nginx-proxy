FROM ubuntu:latest

# Install nginx
RUN apt-get update && apt-get install -y nginx && rm -rf /var/lib/apt/lists/*

# Copy nginx configuration template and entrypoint
COPY nginx.conf.template /etc/nginx/nginx.conf.template
COPY nginx-entrypoint.sh /nginx-entrypoint.sh
RUN chmod +x /nginx-entrypoint.sh

# Copy SSL certificates (will be mounted from certs directory)
# The certs directory should contain cert.pem and key.pem

EXPOSE 5000

ENTRYPOINT ["/nginx-entrypoint.sh"]
